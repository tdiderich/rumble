# Custom Integration: MalwareBytes + runZero

## Requirements

- runZero API Client Credentials
- runZero Organization ID
- MalwareBytes Client ID and Secret

## Steps

### runZero Configuration

1. Update these values in the code:

- `RUNZERO_BASE_URL` - update if not using SaaS, link you use to login to runZero
- `RUNZERO_ORG_ID` - from the [runZero Organizations page](https://console.runzero.com/organizations)
- `RUNZERO_SITE_NAME` - from the [runZero Sites page](https://console.runzero.com/sites)
- `RUNZERO_CLIENT_ID` - superusers can create API clients on the [API clients page](https://console.runzero.com/account/api/clients)
- `RUNZERO_CLIENT_SECRET` - superusers can create API clients on the [API clients page](https://console.runzero.com/account/api/clients)

### MalwareBytes configuration

1. Get your MalwareBytes API URL

- If you use the cloud hosted version, it will be `https://api.malwarebytes.com`
- If you do not, you may need to confirm your API URL with support

2. Get your MalwareBytes Account ID

- Documented [here](https://forums.malwarebytes.com/topic/273187-locate-nebula-accountid-for-use-with-malwarebytes-api/)

3. Get your MalwareBytes Client ID and Secret:

- Authentication mechanism documented [here](https://api.malwarebytes.com/nebula/v1/docs#section/Authentication)
- Follow [this](https://api.malwarebytes.com/nebula/v1/docs#tag/Authentication) to create your Client ID and Secret

```
**Note: To obtain a client ID/client secret pair, open the Nebula console, go to Settings -> APIs & Integrations. On that page, click the "Add" button and submit the form. Use the resulting client ID/client secret pair in your base64 string.
```

4. Update these values in the code:

- `MALWAREBYTES_URL` - obtained in step 1
- `MALWAREBYTES_ACCOUNT_ID` - obtained in step 2
- `MALWAREBYTES_CLIENT_ID` - obtained in step 3
- `MALWAREBYTES_CLIENT_SECRET` - obtained in step 3

### Running the script with then do a few things...

- Pulls the systems from MalwareBytes
- Transforms the system data to the proper format for runZero
- Creates a MalwareBytes Custom Integration in runZero (or get the ID if it already exists)
- Uploads the MalwareBytes data to runZero
